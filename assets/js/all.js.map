{"version":3,"sources":["all.js","checkCart.js","index.js","orderForm.js","payment.js","productInner.js","products.js","swal.js","swiper.js","util.js"],"names":["apiUrl","apiPath","productsData","cartData","favoriteData","JSON","parse","localStorage","getItem","cartList","document","querySelector","favoriteList","init","getAllProducts","getProductItem","getCartList","getFavoriteList","getOrderList","AOS","duration","easing","once","toggleLoading","axios","get","then","response","data","products","setTimeout","productsList","renderProductsList","renderPages","renderAddFavoriteBtn","popularProductList","renderPopularProduct","selectProductsList","renderSelectProducts","error","console","log","carts","renderCartList","checkCartList","renderCheckCartList","arr","str","finalTotal","account","cartNum","totalPrice","length","classList","add","forEach","cartItem","product","origin_price","qty","id","imageUrl","title","tothousands","remove","textContent","innerHTML","addCartItem","productId","productNum","post","addEventListener","e","cartId","target","closest","dataset","getAttribute","deleteCartItem","reponse","swalFn","addFavorites","productItem","find","favorite","some","push","toggleAddFavorite","addFavoriteBtn","toggle","renderFavoriteList","favoriteNum","delAllFavoriteBtn","setAttribute","favoritesItem","removeAttribute","favoriteTable","preventDefault","favoriteId","delFavorite","setItem","stringify","delFavoriteIndex","findIndex","splice","cartAccout","cartTotalPrice","index","product_id","btnId","nodeName","changeCartNum","delAllCartBtn","productNumInput","querySelectorAll","productNumDom","numSum","parseInt","value","put","productsItem","category","children","contains","orderForm","submitFormBtn","orderName","orderEmail","orderPhone","orderAddress","orderTradeWay","orderMessage","inputs","orderObj","name","email","tel","address","payment","message","constraints","presence","format","pattern","is","item","nextElementSibling","errors","validate","formCheck","createForm","reset","window","location","href","Object","keys","orderData","orderProductsData","orderformInfo","orderProdcuts","orders","values","orderId","renderOrderProdcuts","renderOrderForm","user","orderTotalPrice","orderItem","payBtn","navTabContent","split","undefined","productInnerData","description","renderProductItem","content","imagesUrl","unit","productNumWrap","productInnerList","productNumSum","btnGroup","toggleCategory","changeTab","allbtns","btn","updateProductsList","filtersData","productsCategory","filter","nowPage","dataPerPage","totalPages","Math","ceil","currentPage","minData","maxData","currentPageData","pageInfo","hasPage","hasNext","renderPageBtn","pageId","switchPage","Number","i","clickPage","page","icon","time","swal","fire","toast","position","timer","showConfirmButton","swiperHeroBanner","Swiper","slidesPerView","loop","autoplay","disableOnInteraction","delay","swiperRecommend","spaceBetween","pagination","el","type","clickable","breakpoints","swiperNews","effect","fadeEffect","crossFade","navigation","nextEl","prevEl","num","parts","toString","replace","join","show","style","display","goTopBtn","scrollGoTop","handleScroll","scrollY","scrollTo","top","behavior"],"mappings":"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","file":"all.js","sourcesContent":["// apiUrl\r\nconst apiUrl = \"https://vue3-course-api.hexschool.io/\";\r\nconst apiPath = \"veganfoodtw2\";\r\n\r\n\r\n// 全域變數\r\n// 產品 data\r\nlet productsData = [];\r\n// 購物車 data\r\nlet cartData = [];\r\n// 我的最愛 Data \r\nlet favoriteData = JSON.parse(localStorage.getItem(\"favoriteItem\")) || [];\r\n\r\n\r\n// DOM 元素管理\r\nconst cartList = document.querySelector(\"#cartList\");\r\nconst favoriteList = document.querySelector(\"#favoriteList\");\r\n\r\n\r\n// 初始化\r\nfunction init() {\r\n    getAllProducts(); // 取得全部產品\r\n    getProductItem(); // 取得產品內頁資訊\r\n    getCartList();// 取得購物車列表\r\n    getFavoriteList(); // 取得我的最愛列表\r\n    getOrderList();// 取的訂單資訊\r\n\r\n    AOS.init({\r\n        duration: 1500,\r\n        easing: 'ease',\r\n        once: true,\r\n    }); // 初始化 Aos動畫套件\r\n};\r\ninit();\r\n\r\n\r\n// 商品資訊 - 取得所有產品\r\nfunction getAllProducts() {\r\n\r\n    //等待資料回傳前， 載入loading\r\n    toggleLoading(true);\r\n\r\n    axios.get(`${apiUrl}api/${apiPath}/products`)\r\n        .then(function (response) {\r\n            productsData = response.data.products;\r\n\r\n\r\n            //資料回傳後， 關閉loading\r\n            setTimeout(() => { toggleLoading(false); }, 600);\r\n\r\n            // 確認有 productsList DOM 才執行\r\n            if (productsList !== null) {\r\n                //資料回傳後渲染畫面\r\n                renderProductsList(productsData);\r\n                //資料回傳 寫入分頁函式\r\n                renderPages(productsData, 1);\r\n                // 呈現愛心按鈕\r\n                renderAddFavoriteBtn();\r\n            };\r\n\r\n            // 確認有 popularProductList DOM 才執行\r\n            if (popularProductList !== null) {\r\n                // 呈現 熱銷餐點列表\r\n                renderPopularProduct(productsData);\r\n                // 呈現愛心按鈕\r\n                renderAddFavoriteBtn();\r\n            };\r\n\r\n            // 確認有 selectProductsList DOM 才執行 \r\n            if (selectProductsList !== null) {\r\n                // 呈現 主廚推薦餐點列表\r\n                renderSelectProducts(productsData);\r\n                // 呈現愛心按鈕\r\n                renderAddFavoriteBtn();\r\n            };\r\n        })\r\n\r\n        .catch(function (error) {\r\n            console.log(error.response.data);\r\n        })\r\n};\r\n\r\n\r\n//  購物車 - 取得購物車資訊\r\nfunction getCartList() {\r\n    axios.get(`${apiUrl}api/${apiPath}/cart`)\r\n        .then(function (response) {\r\n            cartData = response.data.data.carts;\r\n\r\n\r\n            // 呈現購物車列表\r\n            renderCartList(cartData);\r\n\r\n            // 確認購物車頁面 - 呈現購物車列表\r\n            if (checkCartList !== null) {\r\n                renderCheckCartList(cartData);\r\n            };\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error.response.data);\r\n        })\r\n};\r\n\r\n\r\n//  購物車 - 渲染購物車列表\r\nfunction renderCartList(arr) {\r\n    let str = \"\";\r\n\r\n    // 初始化組金額 為 0\r\n    let finalTotal = 0;\r\n\r\n    // DOM 元素\r\n    // 結帳\r\n    const account = document.querySelector(\"#account\");\r\n    // 計算購物車數量\r\n    const cartNum = document.querySelector(\"#cartNum\");\r\n    // 計算總金額\r\n    const totalPrice = document.querySelector(\"#totalPrice\");\r\n\r\n    // 如果購物車數量小於 1 就顯示立即點餐資訊\r\n    if (arr.length < 1) {\r\n        str += `<li class=\"row gx-0 align-items-center\">\r\n         <div class=\"col\">\r\n           <h5 class=\"mb-5 text-center\">購物車內沒有商品，趕快去逛逛吧!</h5>\r\n           <a class=\"btn btn-primary btn-lg w-100\" href=\"./productLists.html\">立即點餐</a>\r\n         </div>\r\n        </li>`;\r\n\r\n        // 結帳畫面消失\r\n        account.classList.add(\"d-none\");\r\n    } else {\r\n        arr.forEach((cartItem) => {\r\n            //  計算總金額totalPrice.textContent = \r\n            finalTotal += cartItem.product.origin_price * cartItem.qty;\r\n\r\n            str += `<li class=\"row  text-center gx-0  align-items-center mb-3\" data-cart-id=${cartItem.id}>\r\n       <div class=\"col-4\">\r\n         <img class=\"img-fluid\" src=\"${cartItem.product.imageUrl}\" alt=\"${cartItem.product.title}\">\r\n       </div>\r\n       <div class=\"col-4\">\r\n         <p>${cartItem.product.title}</p>\r\n          <small class=\"text-muted\"> x ${cartItem.qty}</small>\r\n       </div>\r\n       <div class=\"col-3\">\r\n          <small class=\"text-muted\"> NT$ ${tothousands(cartItem.product.origin_price * cartItem.qty)}</small>\r\n       </div>\r\n       <div class=\"col-1 px-0 mb-0\">\r\n         <button type=\"button\" class=\"btn  shadow-none  border-0 p-0\" id=\"delCartBtn\">\r\n         <i class=\"bi bi-trash-fill text-danger custom-icon-middle\"></i>\r\n         </button>\r\n        </div>\r\n     </li>`\r\n        });\r\n\r\n        // 結帳畫面 出現\r\n        account.classList.remove(\"d-none\");\r\n    };\r\n\r\n    // 呈現購物車數量\r\n    cartNum.textContent = arr.length;\r\n\r\n    // 呈現總金額\r\n    totalPrice.textContent = tothousands(finalTotal);\r\n\r\n    // 呈現購物車產品列表\r\n    cartList.innerHTML = str;\r\n};\r\n\r\n//  購物車 - 加入購物車\r\nfunction addCartItem(productId, productNum) {\r\n    axios.post(`${apiUrl}api/${apiPath}/cart`, {\r\n        \"data\": {\r\n            \"product_id\": productId,\r\n            \"qty\": productNum\r\n        }\r\n    })\r\n        .then(function (response) {\r\n            getCartList();\r\n        })\r\n\r\n        .catch(function (error) {\r\n            console.log(error.response.data);\r\n        })\r\n};\r\n\r\n\r\n//  購物車 - 單筆刪除\r\ncartList.addEventListener(\"click\", function (e) {\r\n    const cartId = e.target.closest(\"li\").dataset.cartId;\r\n\r\n    if (e.target.getAttribute(\"id\") === \"delCartBtn\") {\r\n        deleteCartItem(cartId);\r\n    }\r\n});\r\n\r\nfunction deleteCartItem(cartId) {\r\n    axios.delete(`${apiUrl}api/${apiPath}/cart/${cartId}`)\r\n        .then(function (reponse) {\r\n            getCartList();\r\n            swalFn(\"已刪除單筆餐點\", \"success\", 800);\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error.data);\r\n        })\r\n};\r\n\r\n\r\n// 我的最愛 - 將產品加入我的最愛\r\nfunction addFavorites(productItem, productId) {\r\n    // 先查找 favoriteData資料的 id 與 產品列表的 id 是一樣的，有的話就回傳 true\r\n    favoriteData.find((favorite) => favorite.id === productId);\r\n\r\n    // 要避免重複加入，所以用some功能比對是否有重複id\r\n    if (favoriteData.some((favorite) => favorite.id === productId)) {\r\n        return swalFn(\"重複加入\", \"error\", 800);\r\n    };\r\n\r\n    favoriteData.push(productItem);\r\n    swalFn(\"已加入最愛\", \"success\", 800);\r\n};\r\n\r\n\r\n// 我的最愛 - 切換愛心按鈕\r\nfunction toggleAddFavorite(id) {\r\n    const addFavoriteBtn = document.querySelector(`#addFavorite i[data-favorite-id=${id}]`);\r\n    if (addFavoriteBtn !== null) {\r\n        addFavoriteBtn.classList.toggle(\"bi-heart\");\r\n        addFavoriteBtn.classList.toggle(\"bi-heart-fill\");\r\n    } else {\r\n        renderFavoriteList(favoriteData);\r\n    }\r\n};\r\n\r\n// 我的最愛 - 渲染切換愛心按鈕\r\nfunction renderAddFavoriteBtn() {\r\n    if (favoriteData !== null) {\r\n        favoriteData.forEach((favorite) => toggleAddFavorite(favorite.id));\r\n    } else {\r\n        console.log(\"沒有呈現愛心按鈕\");\r\n        renderFavoriteList(favoriteData);\r\n    }\r\n}\r\n\r\n// 我的最愛 - 取得收藏產品列表 \r\nfunction getFavoriteList() {\r\n    // 確認 產品列表DOM才執行\r\n    if (productsList !== null) {\r\n        renderFavoriteList(favoriteData);\r\n    };\r\n\r\n    // 確認 熱銷產品列表DOM才執行\r\n    if (popularProductList !== null) {\r\n        renderFavoriteList(favoriteData);\r\n    };\r\n\r\n    // 確認有 主廚推薦列表DOM才執行\r\n    if (selectProductsList !== null) {\r\n        renderFavoriteList(favoriteData);\r\n    };\r\n};\r\n\r\n// 我的最愛 - 渲染收藏產品列表\r\nfunction renderFavoriteList(arr) {\r\n    let str = \"\";\r\n\r\n    // 我的最愛數量\r\n    const favoriteNum = document.querySelector(\"#favoriteNum\");\r\n\r\n    // 刪除我的最愛全部按鈕\r\n    const delAllFavoriteBtn = document.querySelector(\"#delAllFavoriteBtn\");\r\n\r\n    if (arr.length < 1) {\r\n        str += `<tr><td colspan=\"3\">\r\n        <h5 class=\"py-4 text-muted\">美食收藏是空的唷!\r\n            快去逛逛吧!\r\n        </h5>\r\n      </td>\r\n      </tr>`;\r\n\r\n        delAllFavoriteBtn.setAttribute(\"disabled\", \"\");\r\n    } else {\r\n        arr.forEach((favoritesItem) => {\r\n            str += `<tr data-favorite-id=${favoritesItem.id}>\r\n      <td>\r\n        <img class=\"img-fluid\" src=\"${favoritesItem.imageUrl}\" alt=\"${favoritesItem.title}\">\r\n      </td>\r\n      <td>${favoritesItem.title}</td>\r\n      <td>\r\n        <button type=\"button\" class=\"btn  shadow-none  border-0 p-0\" id=\"delFavoriteBtn\">\r\n          <i class=\"bi bi-trash-fill text-danger custom-icon-middle\"></i>\r\n        </button>\r\n            </td></tr>`;\r\n        });\r\n        delAllFavoriteBtn.removeAttribute(\"disabled\");\r\n    };\r\n\r\n\r\n    // 呈現我的最愛數量\r\n    favoriteNum.textContent = favoriteData.length;\r\n\r\n    // 呈現我的最愛列表\r\n    favoriteList.innerHTML = str;\r\n};\r\n\r\n// 我的最愛 - 功能整合:單筆刪除、全部刪除\r\n// 我的最愛表單綁上間聽事件\r\nconst favoriteTable = document.querySelector(\"#favoriteTable\");\r\nfavoriteTable.addEventListener(\"click\", function (e) {\r\n    e.preventDefault();\r\n\r\n    // 單筆刪除\r\n    if (e.target.getAttribute(\"id\") === \"delFavoriteBtn\") {\r\n        const favoriteId = e.target.closest(\"#favoriteList tr\").dataset.favoriteId;\r\n        delFavorite(favoriteId)\r\n        toggleAddFavorite(favoriteId);\r\n    };\r\n\r\n    // 刪除全部\r\n    if (e.target.getAttribute(\"id\") === \"delAllFavoriteBtn\") {\r\n        favoriteData = [];\r\n        swalFn(\"已移除所有收藏\", \"success\", 800);\r\n        getAllProducts();\r\n    };\r\n\r\n    // 將資料寫入 localStorage\r\n    localStorage.setItem(\"favoriteItem\", JSON.stringify(favoriteData));\r\n    renderFavoriteList(favoriteData);\r\n});\r\n\r\n\r\n//我的最愛 - 移除單筆最愛\r\nfunction delFavorite(id) {\r\n    // 確認 favoriteData 有資料，就會回傳true\r\n    if (!favoriteData) { return };\r\n\r\n    // 取得我的最愛列表內的 單一品項 id\r\n    const delFavoriteIndex = favoriteData.findIndex(\r\n        (favorite) => favorite.id === id\r\n    );\r\n\r\n    // 如果favoriteData 沒有同樣的 id 品項就return中斷\r\n    if (delFavoriteIndex === -1) return;\r\n    favoriteData.splice(delFavoriteIndex, 1);\r\n\r\n    swalFn(\"已移除收藏\", \"warning\", 800);\r\n}\r\n\r\n\r\n","\r\nconst checkCartList = document.querySelector(\"#checkCartList\");\r\n\r\n\r\n// 確認購物車 - 渲染購物車列表\r\nfunction renderCheckCartList(arr) {\r\n\r\n    let str = \"\";\r\n\r\n    // 初始化組金額 為 0\r\n    let finalTotal = 0;\r\n\r\n    // DOM 元素\r\n    // 結帳\r\n    const cartAccout = document.querySelector(\"#cartAccout\");\r\n\r\n    // 計算總金額\r\n    const cartTotalPrice = document.querySelector(\"#cartTotalPrice\");\r\n\r\n\r\n    if (arr.length < 1) {\r\n        str += `<tr><td colspan=\"6\" class=\"py-6\">\r\n        <h5 class=\"mb-5 text-center\">購物車內沒有商品，趕快去逛逛吧!\r\n            </h5>\r\n        <a class=\"btn btn-primary btn-lg\" href=\"./productLists.html\">立即點餐</a>\r\n      </td>\r\n      </tr>`;\r\n\r\n        cartAccout.classList.add(\"d-none\");\r\n    } else {\r\n        arr.forEach((cartItem, index) => {\r\n            str += `<tr data-cart-id=${cartItem.id}>\r\n            <td>\r\n\r\n            <div class=\"row gx-0 align-items-center\">\r\n            <div class=\"col-6 d-none d-md-block\">\r\n                <img class=\"img-fluid\" src=\"${cartItem.product.imageUrl}\" alt=\"巴西莓果碗\">\r\n            </div>\r\n            <div class=\"col col-md-6\">\r\n                <p class=\"mb-2\">${cartItem.product.title}</p>\r\n                <span>NT$ ${cartItem.product.origin_price}</span>\r\n            </div>\r\n        </div>\r\n            </td>\r\n            <td>\r\n            <div class=\"d-flex justify-content-center\">\r\n            <div class=\"input-group text-center\" style=\"max-width: 160px;\">\r\n                <button type=\"button\" class=\"btn text-success fs-4 shadow-none px-1 px-md-3\" id=\"minusNumBtn\" data-product-num=\"${index}\"  data-product-id=\"${cartItem.product_id}\">\r\n                    -\r\n                </button>\r\n                <input type=\"number\" class=\"form-control text-center w-25 px-1 px-md-2 \" id=\"productNumInput\"  data-product-num=\"${index}\"   value=\"${cartItem.qty}\" min=\"1\" >\r\n                    <button type=\"button\" class=\"btn text-success fs-4  shadow-none px-1 px-md-3\" id=\"plusNumBtn\"data-product-num=\"${index}\"  data-product-id=\"${cartItem.product_id}\"> \r\n                      +\r\n                    </button>\r\n            </div>\r\n        </div>\r\n            </td>\r\n            <td>NT$ ${tothousands(cartItem.product.origin_price * cartItem.qty)}</td>\r\n            <td>\r\n                <button type=\"button\" class=\"btn  shadow-none  border-0 p-0\" id=\"delCartBtn\">\r\n                    <i class=\"bi bi-trash-fill text-danger custom-icon-middle\"></i>\r\n                </button>\r\n            </td>\r\n            </tr>`;\r\n\r\n            //  計算總金額\r\n            finalTotal += cartItem.product.origin_price * cartItem.qty;\r\n\r\n\r\n        });\r\n\r\n        cartAccout.classList.remove(\"d-none\");\r\n    }\r\n\r\n    // 呈現總金額\r\n    cartTotalPrice.textContent = tothousands(finalTotal);\r\n\r\n    // 呈現購物車產品列表\r\n    checkCartList.innerHTML = str;\r\n};\r\n\r\n// 確認購物車 - 功能整合 (刪除和修改)\r\nif (checkCartList !== null) {\r\n    checkCartList.addEventListener(\"click\", function (e) {\r\n\r\n        // 取出 購物車id\r\n        const cartId = e.target.closest(\"tr\").dataset.cartId;\r\n\r\n        // 取出 購物車產品 id\r\n        const productId = e.target.dataset.productId;\r\n\r\n        // 取出 DOM id\r\n        const btnId = e.target.getAttribute(\"id\");\r\n\r\n        if (e.target.nodeName !== \"BUTTON\") {\r\n            return;\r\n        };\r\n\r\n        // 單筆刪除\r\n        if (e.target.getAttribute(\"id\") === \"delCartBtn\") {\r\n            e.preventDefault();\r\n            deleteCartItem(cartId);\r\n        };\r\n\r\n        // 修改購物車數量\r\n        if (btnId === \"plusNumBtn\" || btnId === \"minusNumBtn\") {\r\n            e.preventDefault();\r\n            // 取出 購物車產品的數量\r\n            const productNum = e.target.dataset.productNum;\r\n            changeCartNum(btnId, cartId, productId, productNum);\r\n        };\r\n    });\r\n};\r\n\r\n\r\n// 確認購物車 -  全部刪除\r\nconst delAllCartBtn = document.querySelector(\"#delAllCartBtn\");\r\nif (delAllCartBtn !== null) {\r\n    delAllCartBtn.addEventListener(\"click\", function (e) {\r\n        e.preventDefault();\r\n\r\n        axios.delete(`${apiUrl}api/${apiPath}/carts`)\r\n            .then(function (reponse) {\r\n                swalFn(\"購物車已清空\", \"success\", 800);\r\n                getCartList();\r\n            })\r\n\r\n            .catch(function (error) {\r\n                console.log(error.data);\r\n            })\r\n\r\n    })\r\n};\r\n\r\n\r\n// 確認購物車 - 修改購物車數量\r\nfunction changeCartNum(btnId, cartId, productId, productNum) {\r\n    const productNumInput = document.querySelectorAll(\"#productNumInput\"); // 將所有產品數字 DOM元素全部選取\r\n    let productNumDom = productNumInput[productNum]; //取出 productNumInput 類陣列的索引位置的 DOM元素\r\n    let numSum = parseInt(productNumDom.value); // 將 productNumInput 類陣列的索引位置的 DOM元素的值取出 並轉換為數字\r\n\r\n    // 減少數量\r\n    if (btnId === \"minusNumBtn\") {\r\n        if (numSum === 1) {\r\n            swalFn(\"數量最少為1\", \"warning\", 800);\r\n            return;\r\n        } else {\r\n            numSum -= 1;\r\n        };\r\n    } else if (btnId === \"plusNumBtn\") {\r\n        //增加數量\r\n        numSum += 1;\r\n    }\r\n\r\n    //按下加減鍵開啟loading\r\n    toggleLoading(true);\r\n\r\n    axios.put(`${apiUrl}api/${apiPath}/cart/${cartId}`, {\r\n        \"data\":\r\n        {\r\n            \"product_id\": productId, \"qty\": numSum\r\n        }\r\n    })\r\n        .then(function (reponse) {\r\n            //更新數量後， 關閉loading\r\n            setTimeout(() => { toggleLoading(false); }, 600);\r\n            getCartList();\r\n        })\r\n\r\n        .catch(function (error) {\r\n            console.log(error.data);\r\n        })\r\n};\r\n\r\n","\r\n// 主廚推薦餐點列表 DOM\r\nconst selectProductsList = document.querySelector(\"#selectProductsList\");\r\n\r\n// 渲染 主廚推薦餐點列表\r\nfunction renderSelectProducts(arr) {\r\n    let str = \"\";\r\n\r\n    arr.forEach((productsItem) => {\r\n        if (productsItem.category === \"主餐\") {\r\n            str += `<div class=\"col mb-4\">\r\n            <a data-id=${productsItem.id} href=\"./productInner.html?id=${productsItem.id}\" class=\"text-dark\" id=\"productInnerUrl\">\r\n              <div class=\"card custom-card  shadow-sm\">\r\n              \r\n              <button type=\"button\" class=\"btn  position-absolute   shadow-none  border-0  fs-5 favoriteBtn\" id=\"addFavorite\" style=\"z-index: 1;\">\r\n                  <i class=\"bi bi-heart custom-icon-heart text-danger py-0\" data-favorite-id=${productsItem.id}></i>\r\n             </button>\r\n      \r\n                <div class=\"card-img-wrap\">\r\n                  <img src=\"${productsItem.imageUrl}\" class=\"card-img-top\" alt=\"${productsItem.title}\">\r\n                  <p class=\"card-img-text mb-0  fs-5\">看詳細</p>\r\n                </div>\r\n                <div class=\"card-body\">\r\n                  <h5>${productsItem.title}</h5>\r\n                  <p class=\"mb-3\">售價: <span>NT$ ${tothousands(productsItem.origin_price)}</span></p>\r\n                  <button type=\"button\" class=\"btn btn-outline-success shadow-none   w-100 d-flex justify-content-center align-items-center\" id=\"addCart\">\r\n                  <i class=\"bi bi-cart-plus fs-5  me-2\"></i>\r\n                  加入購物車\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </a>\r\n            </div>`;\r\n        }\r\n    });\r\n\r\n    selectProductsList.innerHTML = str;\r\n};\r\n\r\n// 主廚推薦餐點 - 新增購物車 及 新增最愛功能\r\n\r\nif (selectProductsList !== null) {\r\n    selectProductsList.addEventListener(\"click\", function (e) {\r\n        if (e.target.nodeName === \"BUTTON\") {\r\n            //取出產品 id\r\n            const productId = e.target.closest(\"#productInnerUrl\").dataset.id;\r\n\r\n            // 加入購物車\r\n            if (e.target.getAttribute(\"id\") === \"addCart\") {\r\n                e.preventDefault();\r\n                swalFn(\"已加入購物車\", \"success\", 800);\r\n                addCartItem(productId, 1);\r\n            };\r\n\r\n            // 加入我的最愛\r\n            if (e.target.getAttribute(\"id\") === \"addFavorite\") {\r\n                e.preventDefault();\r\n\r\n                // 產品列表跑 forEach 將 id 取出來與 productId 比對，符合的話加入我的最愛\r\n                productsData.forEach((productItem) => {\r\n\r\n                    if (productItem.id !== productId) { return; }\r\n\r\n                    // 切換愛心樣式\r\n                    // 點擊到加入我的最愛時，沒有實心愛心就加上並新增一筆資料到favoriteData\r\n                    if (e.target.children[0].classList.contains(\"bi-heart\")) {\r\n                        // 加入我的愛心\r\n                        addFavorites(productItem, productId);\r\n                        toggleAddFavorite(productId);\r\n                    } else {\r\n                        // 有實心愛心就從 favoriteData移除一筆資料\r\n                        delFavorite(productId)\r\n                        toggleAddFavorite(productId);\r\n                    };\r\n\r\n                    // 將資料寫入 localStorage\r\n                    localStorage.setItem(\"favoriteItem\", JSON.stringify(favoriteData));\r\n                    getFavoriteList(); \r\n                });\r\n            };\r\n        }\r\n    })\r\n};\r\n\r\n\r\n","\r\nconst orderForm = document.querySelector(\"#orderForm\"); // 訂購表單\r\n\r\nconst submitFormBtn = document.querySelector(\"#submitFormBtn\");// 送出表單按鈕\r\nif (submitFormBtn !== null) {\r\n    submitFormBtn.addEventListener(\"click\", function (e) {\r\n\r\n\r\n        // 取出表單欄位的 dom 標籤元素\r\n        const orderName = document.querySelector(\"#customerName\"); // 姓名\r\n        const orderEmail = document.querySelector(\"#customerEmail\");// Email\r\n        const orderPhone = document.querySelector(\"#customerPhone\");// 手機號碼\r\n        const orderAddress = document.querySelector(\"#customerAddress\");// 地址\r\n        const orderTradeWay = document.querySelector(\"#tradeWay\");// 交易方式\r\n        const orderMessage = document.querySelector(\"#customerMessage\");// 備註\r\n\r\n        // 選取全部的 input 輸入欄位的 dom 標籤元素\r\n        const inputs = document.querySelectorAll(\"input[type=text], input[type=tel], input[type=email],select,textarea\");\r\n\r\n\r\n        // 訂購表單的物件資料\r\n        let orderObj = {\r\n            name: orderName.value,\r\n            email: orderEmail.value,\r\n            tel: orderPhone.value,\r\n            address: orderAddress.value,\r\n            payment: orderTradeWay.value,\r\n            message: orderMessage.value\r\n        };\r\n\r\n        // 制定驗證規則\r\n        const constraints = {\r\n            \"姓名\": {\r\n                presence: {\r\n                    message: \"是必填欄位\"\r\n                },\r\n            },\r\n            \"email\": {\r\n                presence: {\r\n                    message: \"是必填的欄位\"\r\n                },\r\n                email: {\r\n                    message: \"格式輸入錯誤\"\r\n                },\r\n            },\r\n            \"手機號碼\": {\r\n                presence: {\r\n                    message: \"是必填的欄位\"\r\n                },\r\n                format: {\r\n                    pattern: /^09\\d{2}-?\\d{3}-?\\d{3}$/,\r\n                    message: \"開頭須為09\"\r\n                },\r\n                length: {\r\n                    is: 10,\r\n                    message: \"長度須為10碼\"\r\n                }\r\n            },\r\n            \"地址\": {\r\n                presence: {\r\n                    message: \"是必填的欄位\"\r\n                },\r\n            },\r\n            \"付款方式\": {\r\n                presence: {\r\n                    message: \"是必選的欄位\"\r\n                },\r\n            }\r\n        };\r\n\r\n\r\n        if (cartData.length < 1) {\r\n            e.preventDefault();\r\n            swalFn(\"購物車無商品，請去選購!\", \"warning\", 800);\r\n            return;\r\n        };\r\n\r\n\r\n        // 針對每個input 綁定 change 事件監聽驗證，逐一改變錯誤訊息狀態\r\n        inputs.forEach((item) => {\r\n            item.addEventListener(\"change\", function (e) {\r\n                item.nextElementSibling.textContent = '';\r\n                let errors = validate(orderForm, constraints) || '';\r\n                formCheck(errors);\r\n            })\r\n        });\r\n\r\n        // 將錯誤訊息 存取在 errors 變數上\r\n        let errors = validate(orderForm, constraints);\r\n\r\n        // 判斷 errors 錯誤訊息\r\n        if (errors) {\r\n            e.preventDefault();\r\n            formCheck(errors);\r\n            swalFn(\"資料未填寫完整\", \"warning\", 800);\r\n        } else {\r\n            e.preventDefault();\r\n            swalFn(\"訂單已建立\", \"success\", 800);\r\n            // 建立訂購表單\r\n            createForm(orderObj);\r\n            // 清除表單資料\r\n            orderForm.reset();\r\n        };\r\n    })\r\n};\r\n\r\n// 表單  - 建立訂購表單\r\nfunction createForm(orderObj) {\r\n    axios.post(`${apiUrl}api/${apiPath}/order`, {\r\n        \"data\": {\r\n            \"user\": orderObj,\r\n        }\r\n    })\r\n        .then(function (reponse) {\r\n            setTimeout(() => { window.location.href = \"./payment.html\"; }, 800);\r\n            getCartList();\r\n        })\r\n\r\n        .catch(function (error) {\r\n            console.log(error.data);\r\n        })\r\n}\r\n\r\n// 表單 -  驗證\r\nfunction formCheck(errors) {\r\n    Object.keys(errors).forEach(function (keys) {\r\n        document.querySelector(`[data-message=\"${keys}\"]`).textContent = errors[keys];\r\n        // console.log( document.querySelector(`[data-message=\"${keys}\"]`));\r\n    })\r\n};\r\n","let orderData = [];\r\nlet orderProductsData = [];\r\n\r\nconst orderformInfo = document.querySelector(\"#orderformInfo\");\r\nconst orderProdcuts = document.querySelector(\"#orderProdcuts\");\r\n\r\n// 付款 - 取得訂單資訊\r\nfunction getOrderList() {\r\n    axios.get(`${apiUrl}api/${apiPath}/orders`)\r\n        .then(function (reponse) {\r\n            // 訂單資料\r\n            orderData = reponse.data.orders[0];\r\n            \r\n            // Object.keys 物件迴圈取值，取出訂單資料內的產品物件\r\n            orderProductsData = Object.values(reponse.data.orders[0].products);\r\n\r\n            let orderId = orderData.id;\r\n\r\n            if (orderProdcuts !== null) {\r\n                renderOrderProdcuts(orderProductsData);\r\n            };\r\n\r\n            if (orderformInfo !== null) {\r\n                renderOrderForm(orderData);\r\n            };\r\n\r\n            // 付款結帳\r\n            payment(orderId);\r\n        })\r\n\r\n        .catch(function (error) {\r\n            console.log(error.data);\r\n        })\r\n}\r\n\r\n//付款 - 渲染訂單內的表單資料 \r\nfunction renderOrderForm(arr) {\r\n\r\n    // 要渲染表單和產品\r\n    let str = \"\";\r\n\r\n    str += `<div class=\"mb-3\">\r\n        <label for=\"customerName\" class=\"form-label\">姓名</label>\r\n        <input type=\"text\" class=\"form-control\" placeholder=\"${arr.user.name}\" disabled>\r\n    </div>\r\n    <div class=\"mb-3\">\r\n        <label for=\"customerEmail\" class=\"form-label\">電子郵件</label>\r\n        <input type=\"email\" class=\"form-control\" placeholder=\"${arr.user.email}\" disabled>\r\n    </div>\r\n    <div class=\"mb-3\">\r\n        <label for=\"customerPhone\" class=\"form-label\">手機號碼</label>\r\n        <input type=\"tel\" class=\"form-control\" placeholder=\"${arr.user.tel}\" disabled>\r\n    </div>\r\n    <div class=\"mb-3\">\r\n        <label for=\"customerAddress\" class=\"form-label\">地址</label>\r\n        <input type=\"text\" class=\"form-control\" placeholder=\"${arr.user.address}\" disabled>\r\n    </div>\r\n    <div class=\"mb-3\">\r\n        <label for=\"tradeWay\" class=\"form-label\">付款方式</label>\r\n        <select class=\"form-select\"  disabled>\r\n            <option value=\"${arr.user.payment}\">Apple Pay</option>\r\n        </select>\r\n    </div>\r\n    <div class=\"mb-5\">\r\n        <label for=\"customerMessage\" class=\"form-label\">備註</label>\r\n        <textarea name=\"Remarks\" class=\"form-control\" placeholder=\"${arr.user.message}\" cols=\"30\" rows=\"5\"\r\n            disabled></textarea>\r\n    </div>`;\r\n\r\n    orderformInfo.innerHTML = str;\r\n}\r\n\r\n//付款 - 渲染訂單內的產品資料\r\nfunction renderOrderProdcuts(arr) {\r\n    // 初始化組金額 為 0\r\n    let finalTotal = 0;\r\n\r\n    let str = \"\";\r\n\r\n    // 取的總金額 DOM 元素\r\n    const orderTotalPrice = document.querySelector(\"#orderTotalPrice\");\r\n\r\n    arr.forEach((orderItem) => {\r\n        str += `<li class=\"card  mb-3 shadow-sm\">\r\n        <div class=\"row align-items-center g-0\">\r\n            <div class=\"col\">\r\n                <div class=\"ratio ratio-4x3\">\r\n                    <img src=\"${orderItem.product.imageUrl}\" class=\"img-fluid  rounded-start\"\r\n                        alt=\"${orderItem.product.title}\">\r\n                </div>\r\n            </div>\r\n            <div class=\"col\">\r\n                <div class=\"card-body\">\r\n                    <h5 class=\"card-title\">${orderItem.product.title}</h5>\r\n                    <p class=\"card-text mb-2\">數量:${orderItem.qty} </p>\r\n                    <p class=\"card-text\">總價: <span>NT$ ${tothousands(orderItem.qty * orderItem.product.origin_price)} </span></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </li>`;\r\n\r\n        // 計算總金額\r\n        finalTotal += orderItem.qty * orderItem.product.origin_price;\r\n    })\r\n\r\n    // 呈現在付款頁面\r\n    orderTotalPrice.textContent = tothousands(finalTotal);\r\n    orderProdcuts.innerHTML = str;\r\n}\r\n\r\n\r\n//付款 - 結帳\r\nconst payBtn = document.querySelector(\"#payBtn\");\r\nfunction payment(orderId) {\r\n    if (payBtn !== null) {\r\n        payBtn.addEventListener(\"click\", function (e) {\r\n            e.preventDefault();\r\n            axios.post(`${apiUrl}api/${apiPath}/pay/${orderId}`)\r\n                .then(function (response) {\r\n                    swalFn(\"付款完成\", \"success\", 800);\r\n                    setTimeout(() => {window.location.href =\"./orderSuccess.html\";}, 800);\r\n                })\r\n\r\n                .catch(function (error) {\r\n                    console.log(error.data);\r\n                })\r\n        })\r\n    }\r\n}\r\n\r\n\r\n\r\n","\r\n// 單一產品 - 菜單規格及注意事項內容\r\nconst navTabContent = document.querySelector(\"#nav-tabContent\");\r\n\r\n// 單一產品 - 產品內頁資訊\r\nfunction getProductItem() {\r\n    // // 取得產品內頁網址 id\r\n    const productId = location.href.split(\"=\")[1];\r\n\r\n    if (productId !== undefined) {\r\n        // 取得單一產品\r\n        axios.get(`${apiUrl}api/${apiPath}/product/${productId}`)\r\n            .then(function (response) {\r\n\r\n                // 宣告 productData 變數 儲存串接回來的資料\r\n                let productInnerData = response.data.product;\r\n\r\n                // 單一產品 DOM 元素\r\n                document.querySelector(\"#breadcrumb-productCategory\").textContent = productInnerData.category;\r\n                document.querySelector(\"#breadcrumb-productTitle\").textContent = productInnerData.title;\r\n                document.querySelector(\"#productImg\").setAttribute(\"src\", productInnerData.imageUrl);\r\n                document.querySelector(\"#productTitle\").textContent = productInnerData.title;\r\n                document.querySelector(\"#productDescription\").textContent = productInnerData.description;\r\n                document.querySelector(\"#productPrice\").textContent = tothousands(productInnerData.origin_price);\r\n                document.querySelector(\"#addCartBtn\").setAttribute(\"data-product-id\", productInnerData.id);\r\n\r\n                // 渲染單一產品頁面\r\n                renderProductItem(productInnerData);\r\n\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error.response.data);\r\n            })\r\n    };\r\n};\r\n\r\n// 單一產品 - 渲染產品內頁資訊\r\nfunction renderProductItem(data) {\r\n    let str = \"\";\r\n\r\n    str += `<div class=\"tab-pane fade show active\" id=\"nav-describe\" role=\"tabpanel\" aria-labelledby=\"nav-describe-tab\">\r\n   <ul class=\"mb-0\">\r\n       <h5 class=\"mb-3\">嚴選食材及營養價值: </h5>\r\n       ${data.content}\r\n     <li>\r\n        <div class=\"ratio ratio-16x9 mb-5\">\r\n           <img src=\"${data.imagesUrl[0]}\" class=\"img-fluid \" alt=\"berry\">\r\n       </div></li>\r\n     <li>\r\n         <div class=\"ratio ratio-16x9\">\r\n           <img src=\"${data.imagesUrl[1]}\" class=\"img-fluid\" alt=\"berry\">\r\n         </div>\r\n     </li>\r\n   </ul> \r\n  </div>\r\n  <div class=\"tab-pane fade\" id=\"nav-standard\" role=\"tabpanel\" aria-labelledby=\"nav-standard-tab\">\r\n      <ul class=\"mb-0\">\r\n      ${data.unit}\r\n      </ul>\r\n  </div>\r\n  <div class=\"tab-pane fade\" id=\"nav-delivery\" role=\"tabpanel\" aria-labelledby=\"nav-delivery-tab\">\r\n      <h5 class=\"mb-3\">付款方式: </h5>\r\n      <ul class=\"mb-4 ps-4\">\r\n          <li class=\"mb-3\">電子支付: <span>Apple Pay、LINE Pay、街口支付 </span></li>\r\n          <li>ATM轉帳: <span>四大超商、各大銀行提款機皆可操作 </span></li>\r\n      </ul>\r\n      <h5 class=\"mb-3\">運送方式: </h5>\r\n      <p class=\"ps-4 mb-0\">外送或來店自取</p>\r\n  </div>\r\n  <div class=\"tab-pane fade\" id=\"nav-notice\" role=\"tabpanel\" aria-labelledby=\"nav-notice-tab\">\r\n      <ul class=\"mb-0\">\r\n        <li class=\"mb-3\"><p> 1. 餐點為當天現點現做，如有特殊飲食需求可提前來電或 Line 訊息告知。</p></li>\r\n        <li><p> 2. 餐點最佳賞味期效為半小時內需食用完畢。</p></li>\r\n     </ul>\r\n  </div>`;\r\n\r\n    navTabContent.innerHTML = str;\r\n};\r\n\r\n\r\n// 單一產品 - 計算產品數量\r\nconst productNumWrap = document.querySelector(\"#productNumWrap\");\r\n\r\n// 從數量 1 開始計算\r\nlet numSum = 1;\r\n\r\nif (productNumWrap !== null) {\r\n    productInnerList.addEventListener(\"click\", function (e) {\r\n        e.preventDefault();\r\n        //  購買產品數量 DOM\r\n        let productNum = document.querySelector(\"#productNum\");\r\n\r\n        // 減少數量\r\n        if (e.target.getAttribute(\"id\") === \"minusNumBtn\") {\r\n            if (numSum === 1) {\r\n                swalFn(\"數量最少為1\", \"warning\", 800);\r\n                return;\r\n            } else {\r\n                numSum -= 1;\r\n            };\r\n        } else if (e.target.getAttribute(\"id\") === \"plusNumBtn\") {\r\n            //增加數量\r\n            numSum += 1;\r\n        };\r\n\r\n        //按下加減鍵開啟loading\r\n        toggleLoading(true);\r\n        //更新數量後， 關閉loading\r\n        setTimeout(() => { toggleLoading(false); }, 600);\r\n\r\n        //  呈現 目前產品數量\r\n        productNum.value = numSum;\r\n\r\n        // 加入購物車\r\n        if (e.target.getAttribute(\"id\") === \"addCartBtn\") {\r\n            const productId = e.target.dataset.productId;\r\n            let productNumSum = parseInt(productNum.value);\r\n            swalFn(\"已加入購物車\", \"success\", 800);\r\n            addCartItem(productId, productNumSum);\r\n        }\r\n    })\r\n};\r\n\r\n\r\n// 渲染 熱銷餐點列表\r\nconst popularProductList = document.querySelector(\"#popularProductList\");\r\nfunction renderPopularProduct(arr) {\r\n    let str = \"\";\r\n\r\n    arr.forEach((productsItem) => {\r\n        if (productsItem.category === \"飲品\") {\r\n            str += `<div class=\"col mb-4\">\r\n            <a data-id=${productsItem.id} href=\"./productInner.html?id=${productsItem.id}\" class=\"text-dark\" id=\"productInnerUrl\">\r\n              <div class=\"card custom-card  shadow-sm\">\r\n              \r\n              <button type=\"button\" class=\"btn  position-absolute   shadow-none  border-0  fs-5 favoriteBtn\" id=\"addFavorite\" style=\"z-index: 1;\">\r\n                  <i class=\"bi bi-heart custom-icon-heart text-danger py-0\"  data-favorite-id=${productsItem.id}></i>\r\n             </button>\r\n      \r\n                <div class=\"card-img-wrap\">\r\n                  <img src=\"${productsItem.imageUrl}\" class=\"card-img-top\" alt=\"${productsItem.title}\">\r\n                  <p class=\"card-img-text mb-0  fs-5\">看詳細</p>\r\n                </div>\r\n                <div class=\"card-body\">\r\n                  <h5>${productsItem.title}</h5>\r\n                  <p class=\"mb-3\">售價: <span>NT$ ${tothousands(productsItem.origin_price)}</span></p>\r\n                  <button type=\"button\" class=\"btn btn-outline-success shadow-none   w-100 d-flex justify-content-center align-items-center\" id=\"addCart\">\r\n                  <i class=\"bi bi-cart-plus fs-5  me-2\"></i>\r\n                  加入購物車\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </a>\r\n            </div>`;\r\n        }\r\n    });\r\n\r\n    popularProductList.innerHTML = str;\r\n};\r\n\r\n\r\n//熱銷餐點 - 新增購物車 及 新增最愛功能\r\nif (popularProductList !== null) {\r\n    popularProductList.addEventListener(\"click\", function (e) {\r\n        if (e.target.nodeName === \"BUTTON\") {\r\n            //取出產品 id\r\n            const productId = e.target.closest(\"#productInnerUrl\").dataset.id;\r\n\r\n            // 加入購物車\r\n            if (e.target.getAttribute(\"id\") === \"addCart\") {\r\n                e.preventDefault();\r\n                swalFn(\"已加入購物車\", \"success\", 800);\r\n                addCartItem(productId, 1);\r\n                return;\r\n            };\r\n\r\n            // 加入我的最愛\r\n            if (e.target.getAttribute(\"id\") === \"addFavorite\") {\r\n                e.preventDefault();\r\n\r\n                // 產品列表跑 forEach 將 id 取出來與 productId 比對，符合的話加入我的最愛\r\n                productsData.forEach((productItem) => {\r\n\r\n                    if (productItem.id !== productId) { return; }\r\n\r\n                    // 切換愛心樣式\r\n                    // 點擊到加入我的最愛時，沒有實心愛心就加上並新增一筆資料到favoriteData\r\n                    if (e.target.children[0].classList.contains(\"bi-heart\")) {\r\n                        // 加入我的愛心\r\n                        addFavorites(productItem, productId);\r\n                        toggleAddFavorite(productId);\r\n                    } else {\r\n                        // 有實心愛心就從 favoriteData移除一筆資料\r\n                        delFavorite(productId)\r\n                        toggleAddFavorite(productId);\r\n                    };\r\n\r\n                    // 將資料寫入 localStorage\r\n                    localStorage.setItem(\"favoriteItem\", JSON.stringify(favoriteData));\r\n                    getFavoriteList();\r\n                });\r\n            };\r\n        }\r\n    })\r\n};\r\n\r\n\r\n","\r\n// DOM 元素管理\r\n// 產品列表\r\nconst productsList = document.querySelector(\"#productsList\");\r\n// 切換餐點按鈕群組\r\nconst btnGroup = document.querySelector(\"#btn-group\");\r\n\r\n\r\n// 商品資訊 - 渲染產品列表\r\nfunction renderProductsList(arr) {\r\n  let str = \"\";\r\n  arr.forEach((productsItem) => {\r\n    str += `<div class=\"col mb-4\">\r\n      <a data-id=${productsItem.id} href=\"./productInner.html?id=${productsItem.id}\" class=\"text-dark\" id=\"productInnerUrl\">\r\n        <div class=\"card custom-card  shadow-sm\">\r\n        \r\n        <button type=\"button\" class=\"btn  position-absolute   shadow-none  border-0  fs-5 favoriteBtn\" id=\"addFavorite\" style=\"z-index: 1;\">\r\n            <i class=\"bi bi-heart custom-icon-heart text-danger py-0\" data-favorite-id=${productsItem.id}></i>\r\n       </button>\r\n\r\n          <div class=\"card-img-wrap\">\r\n            <img src=\"${productsItem.imageUrl}\" class=\"card-img-top\" alt=\"${productsItem.title}\">\r\n            <p class=\"card-img-text mb-0  fs-5\">看詳細</p>\r\n          </div>\r\n          <div class=\"card-body\">\r\n            <h5>${productsItem.title}</h5>\r\n            <p class=\"mb-3\">售價: <span>NT$ ${tothousands(productsItem.origin_price)}</span></p>\r\n            <button type=\"button\" class=\"btn btn-outline-success shadow-none   w-100 d-flex justify-content-center align-items-center\" id=\"addCart\">\r\n            <i class=\"bi bi-cart-plus fs-5  me-2\"></i>\r\n            加入購物車\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </a>\r\n      </div>`;\r\n  });\r\n\r\n  productsList.innerHTML = str;\r\n};\r\n\r\n// 商品資訊-  切換餐點按鈕 及 修改狀態\r\n//預設category 分類值為全部商品\r\nlet toggleCategory = \"全部商品\";\r\n\r\n// 判斷當下載入頁面是否有 btnGroup DOM 元素\r\nif (btnGroup !== null) {\r\n  // btnGroup 綁定監聽事件\r\n  btnGroup.addEventListener(\"click\", changeTab);\r\n};\r\nfunction changeTab(e) {\r\n  // 判斷點擊到是否是按鈕\"BUTTON\"\r\n  if (e.target.nodeName === \"A\") {\r\n\r\n    // 取出按鈕分類的值\r\n    toggleCategory = e.target.dataset.category;\r\n\r\n    // 按鈕增加active 樣式\r\n    const allbtns = document.querySelectorAll(\"#btn-group a\");\r\n\r\n    // allTabs 回傳類陣列跑foreach 先將 active 全部移除 再加上去\r\n    allbtns.forEach((btn) => {\r\n      btn.classList.remove(\"active\");\r\n    });\r\n\r\n    //點擊到對應的 按鈕 再增加 active 樣式\r\n    e.target.classList.add(\"active\");\r\n  };\r\n\r\n  // 更新餐點列表\r\n  updateProductsList();\r\n\r\n};\r\n\r\n\r\n// 商品資訊 - 餐點按鈕篩選資料功能\r\nfunction updateProductsList() {\r\n  // 宣告 filtersData 變數 用來儲存篩選後的資料\r\n  let filtersData = [];\r\n\r\n  //  顯示 麵包削產品狀態\r\n  const productsCategory = document.querySelector(\"#productsCategory\");\r\n\r\n  if (toggleCategory === \"全部商品\") {\r\n    filtersData = productsData;\r\n    productsCategory.textContent = \"全部商品\";\r\n\r\n  } else {\r\n    filtersData = productsData.filter(productsItem => productsItem.category === toggleCategory);\r\n    productsCategory.textContent = toggleCategory;\r\n\r\n  };\r\n\r\n  // 呈現該頁資料畫面\r\n  renderProductsList(filtersData);\r\n\r\n  // 呈現分頁\r\n  renderPages(filtersData, 1);\r\n\r\n  // 呈現愛心按鈕\r\n  renderAddFavoriteBtn();\r\n};\r\n\r\n\r\n\r\n// 新增功能整合 - 新增購物車 及 新增最愛功能\r\nif (productsList !== null) {\r\n  // 在產品列表綁定監聽\r\n  productsList.addEventListener(\"click\", function (e) {\r\n\r\n    if (e.target.nodeName === \"BUTTON\") {\r\n      //取出產品 id\r\n      const productId = e.target.closest(\"#productInnerUrl\").dataset.id;\r\n\r\n      // 加入購物車\r\n      if (e.target.getAttribute(\"id\") === \"addCart\") {\r\n        e.preventDefault();\r\n        swalFn(\"已加入購物車\", \"success\", 800);\r\n        addCartItem(productId, 1);\r\n      };\r\n\r\n      // 加入我的最愛\r\n      if (e.target.getAttribute(\"id\") === \"addFavorite\") {\r\n        e.preventDefault();\r\n\r\n        // 產品列表跑 forEach 將 id 取出來與 productId 比對，符合的話加入我的最愛\r\n        productsData.forEach((productItem) => {\r\n\r\n          if (productItem.id !== productId) { return; }\r\n\r\n          // 切換愛心樣式\r\n          // 點擊到加入我的最愛時，沒有實心愛心就加上並新增一筆資料到favoriteData\r\n          if (e.target.children[0].classList.contains(\"bi-heart\")) {\r\n            // 加入我的愛心\r\n            addFavorites(productItem, productId);\r\n            toggleAddFavorite(productId);\r\n          } else {\r\n            // 有實心愛心就從 favoriteData移除一筆資料\r\n            delFavorite(productId)\r\n            toggleAddFavorite(productId);\r\n          };\r\n\r\n\r\n          // 將資料寫入 localStorage\r\n          localStorage.setItem(\"favoriteItem\", JSON.stringify(favoriteData));\r\n          getFavoriteList();\r\n        });\r\n      };\r\n    }\r\n  });\r\n};\r\n\r\n\r\n\r\n// 分頁功能 - 整體分頁功能\r\nfunction renderPages(data, nowPage) {\r\n\r\n  // 每一頁只顯示五筆資料\r\n  const dataPerPage = 5;\r\n\r\n  // page 按鈕總數量公式: 資料數量總額 / 每一頁要顯示的資料數量\r\n  // 因為計算過程會有餘數產生，所以要無條件進位，使用 Math.ceil()函式取得一個大於等於指定數字的最小整數。\r\n  const totalPages = Math.ceil(data.length / dataPerPage);\r\n\r\n\r\n  // 頁數\r\n  // 當前頁數，對應現在當前頁數\r\n  let currentPage = nowPage;\r\n  // 當 \"當前頁數\" 比 \"總頁數\" 大的時候， \"當前頁數\" 等於 \"總頁數\"\r\n  if (currentPage > totalPages) {\r\n    currentPage = totalPages;\r\n  };\r\n\r\n  // 資料筆數\r\n  const minData = (currentPage * dataPerPage) - dataPerPage + 1; // 最小資料筆數\r\n  const maxData = (currentPage * dataPerPage);  // 最大資料筆數\r\n\r\n  // 取出當前頁數的資料\r\n  const currentPageData = [];\r\n\r\n  // // 取得 productsData 資料的索引位置\r\n  data.forEach((item, index) => {\r\n    //取得 data 索引位置，因為索引是從 0 開始，所以要 +1\r\n    //當 index+1 比 minData 大且又小於 maxData 就push 進去 currentPageData 陣列\r\n    if (index + 1 >= minData && index + 1 <= maxData) {\r\n      currentPageData.push(item);\r\n    };\r\n  });\r\n\r\n\r\n  // 物件方式傳遞資料\r\n  const pageInfo = {\r\n    totalPages,\r\n    currentPage,\r\n    hasPage: currentPage > 1,\r\n    hasNext: currentPage < totalPages,\r\n  };\r\n\r\n  // 呈現出該頁資料\r\n  renderProductsList(currentPageData);\r\n\r\n  // 呈現出分頁按鈕\r\n  renderPageBtn(pageInfo);\r\n\r\n  // console.log(`全部資料:${data.length} 每一頁顯示:${dataPerPage}筆 總頁數:${totalPages}`);\r\n};\r\n\r\n// 取得分頁 DOM 元素\r\nconst pageId = document.querySelector(\"#pageId\");\r\n\r\n// 在 pageId 綁定監聽\r\nif (pageId !== null) {\r\n  pageId.addEventListener(\"click\", switchPage);\r\n};\r\n\r\n// 分頁功能 - 渲染分頁按鈕\r\nfunction renderPageBtn(pageInfo) {\r\n  let str = \"\";\r\n\r\n  const totalPages = pageInfo.totalPages;\r\n\r\n  // 判斷 總頁數是否大於 1 頁\r\n  if (totalPages > 1) {\r\n    //點選上一頁\r\n    str += (pageInfo.hasPage) ?\r\n      `<li class=\"page-item\"><a class=\"page-link\" href=\"#\"  data-page=\"${Number(pageInfo.currentPage) - 1}\">&laquo;</a></li>`\r\n      : `<li class=\"page-item disabled\"><span class=\"page-link\">&laquo;</span></li>`;\r\n\r\n    // 點選頁數\r\n    for (let i = 1; i <= totalPages; i++) {\r\n      // 一開始預設顯示第一頁，如果是第一頁會加上 .active 樣式\r\n      str += (Number(pageInfo.currentPage) === i) ?\r\n        `<li class=\"page-item active\"><a class=\"page-link\" href=\"#\" aria-label=\"Previous\" data-page=\"${i}\">${i}</a></li>`\r\n        : `<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data-page=\"${i}\">${i}</a></li>`;\r\n    };\r\n\r\n    // 點選下一頁\r\n    str += (pageInfo.hasNext) ?\r\n      `<li class=\"page-item\"><a class=\"page-link\" href=\"#\" aria-label=\"Next\" data-page=\"${Number(pageInfo.currentPage) + 1}\">&raquo;</a></li>`\r\n      : `<li class=\"page-item disabled\"><span class=\"page-link\" >&raquo;</span></li>`;\r\n\r\n  } else {\r\n    //總頁數小於 1 頁，只顯示分頁按鈕\r\n    for (let i = 1; i <= totalPages; i++) {\r\n      // 一開始預設顯示第一頁，如果是第一頁會加上 .active 樣式\r\n      str += (Number(pageInfo.currentPage) === i) ?\r\n        `<li class=\"page-item active\"><a class=\"page-link\" href=\"#\" aria-label=\"Previous\" data-page=\"${i}\">${i}</a></li>`\r\n        : `<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data-page=\"${i}\">${i}</a></li>`;\r\n    };\r\n\r\n  };\r\n\r\n  pageId.innerHTML = str;\r\n};\r\n\r\n//分頁功能 - 點擊按鈕切換頁面功能\r\nfunction switchPage(e) {\r\n  e.preventDefault();\r\n\r\n  if (e.target.nodeName !== \"A\") {\r\n    return;\r\n  };\r\n\r\n  const clickPage = e.target.dataset.page;\r\n\r\n  renderPages(productsData, clickPage);\r\n\r\n  // 渲染愛心按鈕\r\n  renderAddFavoriteBtn();\r\n};","// sweetAlert\r\n// 提示訊息\r\n// success 成功, error 錯誤, warning 驚嘆號 , info 說明\r\nfunction swalFn(title, icon, time) {\r\n  swal.fire({\r\n    toast: true,\r\n    position: 'top-end',\r\n    title: title,\r\n    icon: icon,\r\n    timer: time,\r\n    showConfirmButton: false,\r\n  })\r\n};\r\n\r\n","\r\n// 首頁 heroBanner \r\nconst swiperHeroBanner = new Swiper(\".swiper-heroBanner\", {\r\n  slidesPerView: 1,\r\n  loop: true,\r\n  autoplay: {\r\n    disableOnInteraction: false,\r\n    delay: 4000,\r\n  },\r\n});\r\n\r\n\r\n// 顧客評價\r\nconst swiperRecommend = new Swiper(\".swiper-recommend\", {\r\n  slidesPerView: 1,\r\n  spaceBetween: 0,\r\n  loop: true,\r\n  autoplay: {\r\n    disableOnInteraction: false,\r\n    delay: 3500,\r\n  },\r\n  pagination: {\r\n    el: '.swiper-pagination',\r\n    type: 'bullets',\r\n    clickable: true\r\n  },\r\n  breakpoints: {\r\n    768: {\r\n      slidesPerView: 2,\r\n      spaceBetween: 30,\r\n    },\r\n  },\r\n});\r\n\r\n\r\n\r\n//  最新消息\r\nconst swiperNews = new Swiper(\".swiper-news\", {\r\n  slidesPerView: 1,\r\n  spaceBetween: 0,\r\n  loop: true,\r\n  autoplay: {\r\n    disableOnInteraction: false,\r\n    delay: 3500,\r\n  },\r\n  effect: 'fade',\r\n  fadeEffect: {\r\n    crossFade: true\r\n  },\r\n  navigation: {\r\n    nextEl: '.swiper-button-next',\r\n    prevEl: '.swiper-button-prev',\r\n  },\r\n  pagination: {\r\n    el: '.swiper-pagination',\r\n    type: 'bullets',\r\n  },\r\n  breakpoints: {\r\n    768: {\r\n      slidesPerView: 1,\r\n      spaceBetween: 30,\r\n    },\r\n  },\r\n});\r\n\r\n\r\n","\r\n// 數字轉換千分位函式\r\nfunction tothousands(num) {\r\n    let parts = num.toString().split('.');\r\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n    return parts.join('.');\r\n};\r\n\r\n// loading 載入動態\r\nfunction toggleLoading(show) {\r\n    //show的參數，從外部傳入如果是true 就 開啟loading，flase 就關閉\r\n    document.querySelector(\".loading\").style.display = show ? 'block' : 'none';\r\n};\r\n\r\n\r\n// gotop 回到頂部 \r\n// goTop Dom\r\nconst goTopBtn = document.querySelector(\"#goTopBtn\");\r\n\r\nif (goTopBtn !== null) {\r\n    //點擊 goTopBtn監聽事件，如果scrollY != 0 的話，執行 Window.scrollTo() 內的 平滑滾動至 0\r\n    goTopBtn.addEventListener(\"click\", scrollGoTop);\r\n    //當使用者y軸  超過 800 出現 goTopBtn ，反之消失\r\n    document.addEventListener(\"scroll\", handleScroll);\r\n};\r\n\r\n\r\nfunction handleScroll() {\r\n    if (window.scrollY >= 600) {\r\n        goTopBtn.classList.remove(\"d-none\");\r\n        goTopBtn.classList.add(\"d-block\");\r\n\r\n    } else {\r\n        goTopBtn.classList.remove(\"d-block\");\r\n        goTopBtn.classList.add(\"d-none\");\r\n    }\r\n};\r\n\r\nfunction scrollGoTop() {\r\n    if (window.scrollY != 0) {\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: \"smooth\"\r\n        })\r\n    }\r\n};\r\n\r\n\r\n"]}